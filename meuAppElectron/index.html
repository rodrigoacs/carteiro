<!DOCTYPE html>
<html>
<head>
  <title>Carteiro - API Tester</title>
</head>
<body>
  <h1>Faça sua requisição</h1>
  
  <input type="text" id="url" placeholder="URL">
  
  <label for="method">Método:</label>
  <select id="method">
    <option value="GET">GET</option>
    <option value="POST">POST</option>
    <option value="PUT">PUT</option>
    <option value="DELETE">DELETE</option>
    <option value="PATCH">PATCH</option>
  </select>

  <label for="authType">Tipo de Autenticação:</label>
  <select id="authType">
    <option value="none">Nenhum</option>
    <option value="basic">Basic Auth</option>
  </select>
  
  <div id="basicAuthContainer" style="display: none;">
    Username: <input type="text" id="username" placeholder="Username">
    Password: <input type="password" id="password" placeholder="Password">
  </div>
  
  <div id="bodyContainer" style="display: none;">
    <label for="body">Corpo da Requisição (JSON):</label>
    <textarea id="body" placeholder="Corpo da Requisição (JSON)"></textarea>
  </div>

  <button id="sendRequest">Enviar Requisição</button>
  <pre id="response"></pre>

  <div id="customHeaders">
  </div>
  
  <button id="addHeader">Adicionar Cabeçalho</button>
  
  <script src="renderer.js"></script>
  <script>
    document.getElementById('authType').addEventListener('change', function() {
      const authType = this.value;
      const basicAuthContainer = document.getElementById('basicAuthContainer');
      basicAuthContainer.style.display = authType === 'basic' ? '' : 'none';
    });
    
    document.getElementById('method').addEventListener('change', function() {
      const method = this.value;
      const bodyContainer = document.getElementById('bodyContainer');
      if (['POST', 'PUT', 'PATCH', 'DELETE'].includes(method)) {
        bodyContainer.style.display = '';
      } else {
        bodyContainer.style.display = 'none';
      }
    });
    
    document.getElementById('addHeader').addEventListener('click', function() {
      const customHeaders = document.getElementById('customHeaders');
      const newHeaderPair = document.createElement('div');
      newHeaderPair.innerHTML = `
        <input type="text" placeholder="Chave" class="headerKey">
        <input type="text" placeholder="Valor" class="headerValue">
        <button class="removeHeader">Remover</button>
      `;
      customHeaders.appendChild(newHeaderPair);

      newHeaderPair.querySelector('.removeHeader').addEventListener('click', function() {
        newHeaderPair.remove();
      });
    });
  </script>
</body>
</html>
